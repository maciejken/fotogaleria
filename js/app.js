$(function() {
  var body, closeBtn, figures, header, menuBtn, navMenu, navMenuOpen, popup, popupFig, popupImg, popupNav, showBtn, title;
  body = $('body');
  header = $('header');
  title = header.find('h1');
  title.on('mouseover', function() {
    return $(this).find('i.fa').addClass('fa-home');
  });
  title.on('mouseout', function() {
    return $(this).find('i.fa').removeClass('fa-home');
  });
  menuBtn = header.find('.icon-arrow-down');
  navMenu = $('nav.menu');
  navMenuOpen = false;
  menuBtn.on('click', function() {
    navMenu.slideToggle(500);
    if (navMenuOpen) {
      $(this).toggleClass('icon-arrow-up');
      $(this).toggleClass('icon-arrow-down');
      return navMenuOpen = true;
    } else {
      $(this).toggleClass('icon-arrow-up');
      $(this).toggleClass('icon-arrow-down');
      return navMenuOpen = false;
    }
  });
  figures = $('figure.post');
  figures.on('mousemove', function(e) {
    var img, offset, x, y;
    offset = $(this).offset();
    x = -(e.pageX - offset.left) / 20;
    y = -(e.pageY - offset.top) / 20;
    img = $(this).find('img');
    return img.css({
      left: x + 'px',
      top: y + 'px'
    });
  });
  figures.on('click', function() {
    var caption, figHeight, figWidth, img, imgRatio, minHeight, minWidth, offset, winHeight, winRatio, winWidth;
    img = $(this).find('img');
    caption = $(this).find('figcaption');
    offset = this.getBoundingClientRect();
    popup.addClass('fullscreen');
    popupFig.append(caption.clone());
    popupImg.attr('src', img.attr('src'));
    popup.animate({
      opacity: 1
    }, 500);
    popupFig.css({
      top: offset.top,
      left: offset.left,
      width: $(this).width(),
      height: $(this).height()
    });
    popupImg.css({
      width: img.width(),
      margin: img.css('margin'),
      opacity: 1
    });
    winWidth = window.innerWidth;
    winHeight = window.innerHeight;
    winRatio = winHeight / winWidth;
    imgRatio = img.outerHeight() / img.outerWidth();
    if (winRatio < imgRatio) {
      figWidth = winWidth * (winRatio / imgRatio);
    } else {
      figWidth = winWidth;
    }
    figHeight = figWidth * imgRatio;
    minWidth = Math.min(popupImg.outerWidth(), figWidth);
    minHeight = Math.min(popupImg.outerHeight(), figHeight);
    popupFig.animate({
      top: window.innerHeight / 2 - minHeight / 2,
      left: window.innerWidth / 2 - minWidth / 2,
      width: minWidth,
      height: minHeight
    }, 500);
    popupImg.animate({
      margin: 0,
      width: minWidth
    }, 500, function() {
      var initFigCSS, popupImgCSS;
      initFigCSS = {
        position: 'static',
        top: 'auto',
        left: 'auto',
        height: 'auto'
      };
      popupImgCSS = {
        width: '100%'
      };
      popupFig.css(initFigCSS);
      popupImg.css(popupImgCSS);
      return popupFig.animate({
        width: figWidth
      }, 500, function() {
        return popupFig.css({
          position: 'relative'
        });
      });
    });
    $(window).on('resize', function() {
      winRatio = $(this).innerHeight() / $(this).innerWidth();
      figWidth = $(this).innerWidth() * (winRatio / imgRatio);
      popupFig.css({
        width: figWidth
      });
      return caption.outerWidth(figWidth);
    });
    return popup.on('click', function() {
      var initImgCSS;
      $(this).removeClass('fullscreen');
      caption.hide();
      $(this).css('opacity', 0);
      $(this).find('figcaption').remove();
      initImgCSS = {
        opacity: 0
      };
      popupImg.css(initImgCSS);
      popupFig.css('position', 'absolute');
      popupImg.attr('src', '');
      showBtn.removeClass('icon-arrow-up');
      return popupNav.hide();
    });
  });
  popup = $('.popup');
  popupFig = popup.find('figure');
  popupImg = popup.find('img');
  popupNav = popup.find('nav');
  popupNav.hide();
  popupNav.on('click', function() {
    return false;
  });
  closeBtn = popupNav.find('.icon-close');
  showBtn = popupNav.find('.icon-arrow-down');
  closeBtn.on('click', function() {
    return popup.click();
  });
  showBtn.on('click', function() {
    var caption, imgHeight, navHeight;
    caption = popup.find('figcaption');
    imgHeight = popupImg.outerHeight();
    navHeight = $(this).parent().outerHeight();
    caption.outerHeight(imgHeight - navHeight);
    caption.css('top', navHeight);
    caption.slideToggle(500);
    $(this).toggleClass('icon-arrow-up');
    caption.on('click', function(e) {
      return e.stopImmediatePropagation();
    });
    return $(window).on('resize', function() {
      imgHeight = popupImg.outerHeight();
      navHeight = popupNav.outerHeight();
      caption.outerHeight(imgHeight - navHeight);
      return caption.css('top', navHeight);
    });
  });
  return popupImg.on('click', function(e) {
    popupNav.fadeToggle(500);
    return e.stopImmediatePropagation();
  });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyJhcHAuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLENBQUEsQ0FBRSxTQUFBO0FBR0UsTUFBQTtFQUFBLElBQUEsR0FBTyxDQUFBLENBQUUsTUFBRjtFQUNQLE1BQUEsR0FBUyxDQUFBLENBQUUsUUFBRjtFQUNULEtBQUEsR0FBUSxNQUFNLENBQUMsSUFBUCxDQUFZLElBQVo7RUFDUixLQUFLLENBQUMsRUFBTixDQUFTLFdBQVQsRUFBc0IsU0FBQTtXQUNsQixDQUFBLENBQUUsSUFBRixDQUFJLENBQUMsSUFBTCxDQUFVLE1BQVYsQ0FDQSxDQUFDLFFBREQsQ0FDVSxTQURWO0VBRGtCLENBQXRCO0VBR0EsS0FBSyxDQUFDLEVBQU4sQ0FBUyxVQUFULEVBQXFCLFNBQUE7V0FDakIsQ0FBQSxDQUFFLElBQUYsQ0FBSSxDQUFDLElBQUwsQ0FBVSxNQUFWLENBQ0EsQ0FBQyxXQURELENBQ2EsU0FEYjtFQURpQixDQUFyQjtFQUdBLE9BQUEsR0FBVSxNQUFNLENBQUMsSUFBUCxDQUFZLGtCQUFaO0VBQ1YsT0FBQSxHQUFVLENBQUEsQ0FBRSxVQUFGO0VBQ1YsV0FBQSxHQUFjO0VBQ2QsT0FBTyxDQUFDLEVBQVIsQ0FBVyxPQUFYLEVBQW9CLFNBQUE7SUFDaEIsT0FBTyxDQUFDLFdBQVIsQ0FBb0IsR0FBcEI7SUFDQSxJQUFHLFdBQUg7TUFDSSxDQUFBLENBQUUsSUFBRixDQUFJLENBQUMsV0FBTCxDQUFpQixlQUFqQjtNQUNBLENBQUEsQ0FBRSxJQUFGLENBQUksQ0FBQyxXQUFMLENBQWlCLGlCQUFqQjthQUNBLFdBQUEsR0FBYyxLQUhsQjtLQUFBLE1BQUE7TUFLSSxDQUFBLENBQUUsSUFBRixDQUFJLENBQUMsV0FBTCxDQUFpQixlQUFqQjtNQUNBLENBQUEsQ0FBRSxJQUFGLENBQUksQ0FBQyxXQUFMLENBQWlCLGlCQUFqQjthQUNBLFdBQUEsR0FBYyxNQVBsQjs7RUFGZ0IsQ0FBcEI7RUFXQSxPQUFBLEdBQVUs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TUFBTCxDQUFBLENBQWEsQ0FBQyxXQUFkLENBQUE7SUFDWixPQUFPLENBQUMsV0FBUixDQUFvQixTQUFBLEdBQVksU0FBaEM7SUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLEtBQVosRUFBbUIsU0FBbkI7SUFDQSxPQUFPLENBQUMsV0FBUixDQUFvQixHQUFwQjtJQUNBLENBQUEsQ0FBRSxJQUFGLENBQUksQ0FBQyxXQUFMLENBQWlCLGVBQWpCO0lBRUEsT0FBTyxDQUFDLEVBQVIsQ0FBVyxPQUFYLEVBQW9CLFNBQUMsQ0FBRDthQUNoQixDQUFDLENBQUMsd0JBQUYsQ0FBQTtJQURnQixDQUFwQjtXQUdBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxFQUFWLENBQWEsUUFBYixFQUF1QixTQUFBO01BQ25CLFNBQUEsR0FBWSxRQUFRLENBQUMsV0FBVCxDQUFBO01BQ1osU0FBQSxHQUFZLFFBQVEsQ0FBQyxXQUFULENBQUE7TUFDWixPQUFPLENBQUMsV0FBUixDQUFvQixTQUFBLEdBQVksU0FBaEM7YUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLEtBQVosRUFBbUIsU0FBbkI7SUFKbUIsQ0FBdkI7RUFaZ0IsQ0FBcEI7U0FvQkEsUUFBUSxDQUFDLEVBQVQsQ0FBWSxPQUFaLEVBQXFCLFNBQUMsQ0FBRDtJQUNqQixRQUFRLENBQUMsVUFBVCxDQUFvQixHQUFwQjtXQUNBLENBQUMsQ0FBQyx3QkFBRixDQUFBO0VBRmlCLENBQXJCO0FBbktGLENBQUYiLCJzb3VyY2VzQ29udGVudCI6WyIkIC0+XG5cbiAgICAjIHNob3cvaGlkZSBuYXYgbWVudSBiYXJcbiAgICBib2R5ID0gJCgnYm9keScpXG4gICAgaGVhZGVyID0gJCgnaGVhZGVyJylcbiAgICB0aXRsZSA9IGhlYWRlci5maW5kICdoMSdcbiAgICB0aXRsZS5vbiAnbW91c2VvdmVyJywgLT5cbiAgICAgICAgJChAKS5maW5kICdpLmZhJ1xuICAgICAgICAuYWRkQ2xhc3MgJ2ZhLWhvbWUnXG4gICAgdGl0bGUub24gJ21vdXNlb3V0JywgLT5cbiAgICAgICAgJChAKS5maW5kICdpLmZhJ1xuICAgICAgICAucmVtb3ZlQ2xhc3MgJ2ZhLWhvbWUnXG4gICAgbWVudUJ0biA9IGhlYWRlci5maW5kICcuaWNvbi1hcnJvdy1kb3duJ1xuICAgIG5hdk1lbnUgPSAkKCduYXYubWVudScpXG4gICAgbmF2TWVudU9wZW4gPSBmYWxzZVxuICAgIG1lbnVCdG4ub24gJ2NsaWNrJywgLT5cbiAgICAgICAgbmF2TWVudS5zbGlkZVRvZ2dsZSA1MDBcbiAgICAgICAgaWYgbmF2TWVudU9wZW5cbiAgICAgICAgICAgICQoQCkudG9nZ2xlQ2xhc3MoJ2ljb24tYXJyb3ctdXAnKVxuICAgICAgICAgICAgJChAKS50b2dnbGVDbGFzcygnaWNvbi1hcnJvdy1kb3duJylcbiAgICAgICAgICAgIG5hdk1lbnVPcGVuID0gdHJ1ZVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAkKEApLnRvZ2dsZUNsYXNzKCdpY29uLWFycm93LXVwJylcbiAgICAgICAgICAgICQoQCkudG9nZ2xlQ2xhc3MoJ2ljb24tYXJyb3ctZG93bicpXG4gICAgICAgICAgICBuYXZNZW51T3BlbiA9IGZhbHNlXG5cbiAgICBmaWd1cmVzID0gJCgnZmlndXJlLnBvc3QnKVxuXG4gICAgIyBtb3ZlIGltYWdlIG9uIG1vdXNlbW92ZVxuICAgIGZpZ3VyZXMub24gJ21vdXNlbW92ZScsIChlKSAtPlxuICAgICAgICBvZmZzZXQgPSAkKEApLm9mZnNldCgpXG4gICAgICAgIHggPSAtKGUucGFnZVggLSBvZmZzZXQubGVmdCkvMjBcbiAgICAgICAgeSA9IC0oZS5wYWdlWSAtIG9mZnNldC50b3ApLzIwXG5cbiAgICAgICAgaW1nID0gJChAKS5maW5kICdpbWcnXG4gICAgICAgIGltZy5jc3NcbiAgICAgICAgICAgIGxlZnQ6IHggKyAncHgnXG4gICAgICAgICAgICB0b3A6IHkgKyAncHgnXG5cbiAgICAjIHNob3cgaW1hZ2Ugb24gZnVsbHNjcmVlblxuICAgIGZpZ3VyZXMub24gJ2NsaWNrJywgLT5cbiAgICAgICAgaW1nID0gJChAKS5maW5kICdpbWcnXG4gICAgICAgIGNhcHRpb24gPSAkKEApLmZpbmQgJ2ZpZ2NhcHRpb24nXG4gICAgICAgIG9mZnNldCA9IEBnZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICBwb3B1cC5hZGRDbGFzcygnZnVsbHNjcmVlbicpXG4gICAgICAgIHBvcHVwRmlnLmFwcGVuZCBjYXB0aW9uLmNsb25lKClcbiAgICAgICAgcG9wdXBJbWcuYXR0cignc3JjJywgaW1nLmF0dHIoJ3NyYycpKVxuICAgICAgICBwb3B1cC5hbmltYXRlXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICA1MDBcbiAgICAgICAgcG9wdXBGaWcuY3NzXG4gICAgICAgICAgICB0b3A6IG9mZnNldC50b3BcbiAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0XG4gICAgICAgICAgICB3aWR0aDogJChAKS53aWR0aCgpXG4gICAgICAgICAgICBoZWlnaHQ6ICQoQCkuaGVpZ2h0KClcbiAgICAgICAgcG9wdXBJbWcuY3NzXG4gICAgICAgICAgICB3aWR0aDogaW1nLndpZHRoKClcbiAgICAgICAgICAgIG1hcmdpbjogaW1nLmNzcygnbWFyZ2luJylcbiAgICAgICAgICAgIG9wYWNpdHk6IDFcblxuICAgICAgICB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gICAgICAgIHdpbkhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxuICAgICAgICB3aW5SYXRpbyA9ICB3aW5IZWlnaHQgLyB3aW5XaWR0aFxuICAgICAgICBpbWdSYXRpbyA9IGltZy5vdXRlckhlaWdodCgpIC8gaW1nLm91dGVyV2lkdGgoKVxuXG4gICAgICAgICMgJCgncC53aWR0aCcpLnRleHQod2luZG93LmlubmVyV2lkdGggKyAnICcgKyB3aW5XaWR0aClcblxuICAgICAgICBpZiB3aW5SYXRpbyA8IGltZ1JhdGlvXG4gICAgICAgICAgICBmaWdXaWR0aCA9IHdpbldpZHRoKih3aW5SYXRpby9pbWdSYXRpbylcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZmlnV2lkdGggPSB3aW5XaWR0aFxuXG4gICAgICAgIGZpZ0hlaWdodCA9IGZpZ1dpZHRoKmltZ1JhdGlvXG5cbiAgICAgICAgIyBhbmltYWNqYSBwcnplc3V3YW5pYSBpIHBvd2nEmWtzemFuaWEga2xpa25pxJl0ZWdvIG9icmF6a2FcbiAgICAgICAgbWluV2lkdGggPSBNYXRoLm1pbihwb3B1cEltZy5vdXRlcldpZHRoKCksIGZpZ1dpZHRoKVxuICAgICAgICBtaW5IZWlnaHQgPSBNYXRoLm1pbihwb3B1cEltZy5vdXRlckhlaWdodCgpLCBmaWdIZWlnaHQpXG4gICAgICAgIHBvcHVwRmlnLmFuaW1hdGVcbiAgICAgICAgICAgIHRvcDogd2luZG93LmlubmVySGVpZ2h0LzIgLSBtaW5IZWlnaHQvMlxuICAgICAgICAgICAgbGVmdDogd2luZG93LmlubmVyV2lkdGgvMiAtIG1pbldpZHRoLzJcbiAgICAgICAgICAgIHdpZHRoOiBtaW5XaWR0aFxuICAgICAgICAgICAgaGVpZ2h0OiBtaW5IZWlnaHRcbiAgICAgICAgICAgIDUwMFxuICAgICAgICBwb3B1cEltZy5hbmltYXRlXG4gICAgICAgICAgICBtYXJnaW46IDBcbiAgICAgICAgICAgIHdpZHRoOiBtaW5XaWR0aFxuICAgICAgICAgICAgNTAwXG4gICAgICAgICAgICAtPlxuICAgICAgICAgICAgICAgICMgZGVidWdnZXJcbiAgICAgICAgICAgICAgICBpbml0RmlnQ1NTID1cbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdzdGF0aWMnXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIHBvcHVwSW1nQ1NTID1cbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgICAgICAgICAgICAgIHBvcHVwRmlnLmNzcyBpbml0RmlnQ1NTXG4gICAgICAgICAgICAgICAgcG9wdXBJbWcuY3NzIHBvcHVwSW1nQ1NTXG4gICAgICAgICAgICAgICAgcG9wdXBGaWcuYW5pbWF0ZVxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZmlnV2lkdGhcbiAgICAgICAgICAgICAgICAgICAgNTAwXG4gICAgICAgICAgICAgICAgICAgIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEZpZy5jc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgxbxlYnkgZ8Ozcm55IHBhc2VrIGkgb3BpcyBiecWCeSB3ZSB3xYJhxZtjaXd5bSBtaWVqc2N1XG5cbiAgICAgICAgJCh3aW5kb3cpLm9uICdyZXNpemUnLCAtPlxuICAgICAgICAgICAgd2luUmF0aW8gPSAkKEApLmlubmVySGVpZ2h0KCkgLyAkKEApLmlubmVyV2lkdGgoKVxuICAgICAgICAgICAgZmlnV2lkdGggPSAkKEApLmlubmVyV2lkdGgoKSAqICh3aW5SYXRpby9pbWdSYXRpbylcbiAgICAgICAgICAgIHBvcHVwRmlnLmNzc1xuICAgICAgICAgICAgICAgIHdpZHRoOiBmaWdXaWR0aFxuICAgICAgICAgICAgY2FwdGlvbi5vdXRlcldpZHRoKGZpZ1dpZHRoKVxuICAgICAgICAgICAgICAgICMgcG9wcmF3a2EgcmVzcG9uc3l3bm/Fm2NpOiBzemVyb2tvxZvEhyBvYnJhemthXG5cbiAgICAgICAgcG9wdXAub24gJ2NsaWNrJywgLT5cbiAgICAgICAgICAgICQoQCkucmVtb3ZlQ2xhc3MoJ2Z1bGxzY3JlZW4nKVxuICAgICAgICAgICAgY2FwdGlvbi5oaWRlKClcbiAgICAgICAgICAgICQoQCkuY3NzKCdvcGFjaXR5JywgMClcbiAgICAgICAgICAgICQoQCkuZmluZCgnZmlnY2FwdGlvbicpLnJlbW92ZSgpXG4gICAgICAgICAgICBpbml0SW1nQ1NTID1cbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICBwb3B1cEltZy5jc3MgaW5pdEltZ0NTU1xuICAgICAgICAgICAgcG9wdXBGaWcuY3NzICdwb3NpdGlvbicsICdhYnNvbHV0ZSdcbiAgICAgICAgICAgIHBvcHVwSW1nLmF0dHIgJ3NyYycsICcnXG4gICAgICAgICAgICBzaG93QnRuLnJlbW92ZUNsYXNzICdpY29uLWFycm93LXVwJ1xuICAgICAgICAgICAgcG9wdXBOYXYuaGlkZSgpXG5cbiAgICBwb3B1cCA9ICQoJy5wb3B1cCcpXG5cbiAgICBwb3B1cEZpZyA9IHBvcHVwLmZpbmQgJ2ZpZ3VyZSdcbiAgICBwb3B1cEltZyA9IHBvcHVwLmZpbmQgJ2ltZydcbiAgICBwb3B1cE5hdiA9IHBvcHVwLmZpbmQgJ25hdidcbiAgICBwb3B1cE5hdi5oaWRlKClcbiAgICBwb3B1cE5hdi5vbiAnY2xpY2snLCAtPlxuICAgICAgICBmYWxzZVxuICAgIGNsb3NlQnRuID0gcG9wdXBOYXYuZmluZCAnLmljb24tY2xvc2UnXG4gICAgc2hvd0J0biA9IHBvcHVwTmF2LmZpbmQgJy5pY29uLWFycm93LWRvd24nXG5cbiAgICAjIGV4aXQgZnVsbHNjcmVlbiBtb2RlXG4gICAgY2xvc2VCdG4ub24gJ2NsaWNrJywgLT5cbiAgICAgICAgcG9wdXAuY2xpY2soKVxuXG4gICAgIyB0b2dnbGUgY2FwdGlvbiB2aXNpYmlsaXR5XG4gICAgc2hvd0J0bi5vbiAnY2xpY2snLCAtPlxuICAgICAgICBjYXB0aW9uID0gcG9wdXAuZmluZCAnZmlnY2FwdGlvbidcbiAgICAgICAgaW1nSGVpZ2h0ID0gcG9wdXBJbWcub3V0ZXJIZWlnaHQoKVxuICAgICAgICBuYXZIZWlnaHQgPSAkKEApLnBhcmVudCgpLm91dGVySGVpZ2h0KClcbiAgICAgICAgY2FwdGlvbi5vdXRlckhlaWdodChpbWdIZWlnaHQgLSBuYXZIZWlnaHQpXG4gICAgICAgIGNhcHRpb24uY3NzKCd0b3AnLCBuYXZIZWlnaHQpXG4gICAgICAgIGNhcHRpb24uc2xpZGVUb2dnbGUgNTAwXG4gICAgICAgICQoQCkudG9nZ2xlQ2xhc3MoJ2ljb24tYXJyb3ctdXAnKVxuXG4gICAgICAgIGNhcHRpb24ub24gJ2NsaWNrJywgKGUpIC0+XG4gICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXG5cbiAgICAgICAgJCh3aW5kb3cpLm9uICdyZXNpemUnLCAtPlxuICAgICAgICAgICAgaW1nSGVpZ2h0ID0gcG9wdXBJbWcub3V0ZXJIZWlnaHQoKVxuICAgICAgICAgICAgbmF2SGVpZ2h0ID0gcG9wdXBOYXYub3V0ZXJIZWlnaHQoKVxuICAgICAgICAgICAgY2FwdGlvbi5vdXRlckhlaWdodChpbWdIZWlnaHQgLSBuYXZIZWlnaHQpXG4gICAgICAgICAgICBjYXB0aW9uLmNzcygndG9wJywgbmF2SGVpZ2h0KVxuICAgICAgICAgICAgIyBwb3ByYXdrYSByZXNwb25zeXdub8WbY2kgZGxhIGfDs3JuZWogYmVsa2kgaSBvcGlzdVxuXG5cbiAgICBwb3B1cEltZy5vbiAnY2xpY2snLCAoZSkgLT5cbiAgICAgICAgcG9wdXBOYXYuZmFkZVRvZ2dsZSA1MDBcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxuIl19
